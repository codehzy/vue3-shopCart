import{d as t,c as e,a,b as s,t as n,w as r,p as o,e as i,r as c,o as u,f as p,u as d,g as l,h as m,F as v,T as h,i as g,j as f,k as C,l as _,m as y,B as k,L as E,I as b}from"./vendor.9f0272e7.js";var D=t({name:"NavBar",props:{count:Number,active:String},setup:()=>{}});const I=r();o("data-v-586e54c2");const A={class:"nav-bar"},N=s("商品列表");i();const O=I(((t,r,o,i,p,d)=>{const l=c("router-link");return u(),e("div",A,[a(l,{to:"/",class:{active:"product"===t.active}},{default:I((()=>[N])),_:1},8,["class"]),a(l,{to:"/shoppingCart",class:{active:"shoppingCart"===t.active}},{default:I((()=>[s("购物车"+n(t.count?`(${t.count})`:""),1)])),_:1},8,["class"])])}));D.render=O,D.__scopeId="data-v-586e54c2";const P=Symbol(),R=p({state:{shoppingCart:[]},getters:{isInCart:t=>e=>t.shoppingCart.findIndex((t=>t.id===e.id))>-1},mutations:{ADD_TO_CARD(t,e){t.shoppingCart.push(e)},CHANGE_COUNT:(t,{type:e,data:a})=>t.shoppingCart.map((t=>(a.id===t.id&&(t.count+="add"===e?1:-1),t))),REMOVE_BY_ID(t,e){t.shoppingCart=t.shoppingCart.filter((t=>t.id!==e))}}});function T(){return d(P)}var w=t({name:"App",components:{NavBar:D},setup(t,e){const a=T(),s=m();return{count:l((()=>a.state.shoppingCart.length)),activeRouteName:l((()=>{var t;return(null==(t=s.name)?void 0:t.toString())||""}))}}});const L={class:"body"};let B;w.render=function(t,s,n,r,o,i){const p=c("nav-bar"),d=c("router-view");return u(),e(v,null,[a(p,{count:t.count,active:t.activeRouteName},null,8,["count","active"]),a("div",L,[a(d)])],64)};const S={},$=[{id:1,title:"袜子",price:2,count:0},{id:2,title:"鞋垫",price:1.9,count:0},{id:3,title:"枇杷",price:9.3,count:0},{id:4,title:"拖鞋",price:20,count:0},{id:5,title:"旧手机",price:39.9,count:0},{id:6,title:"脐橙",price:7.8,count:0},{id:7,title:"口罩",price:9.9,count:0},{id:8,title:"纸巾",price:12,count:0}],j=t=>h(t);var x=t({name:"Products",setup:()=>{const t=g([]),e=g(!1),{commit:a,getters:s}=T();return(async()=>{e.value=!0,t.value=await new Promise(((t,e)=>{setTimeout((()=>{t($)}),1e3)})),e.value=!1})(),{loading:e,products:t,addHandel:t=>{if((t=>s.isInCart(t))(t))return j("已存在");(t=>{a("ADD_TO_CARD",{title:t.title,count:1,id:t.id,price:t.price})})(t),j("添加成功")}}}});const H=r();o("data-v-3e31cf1e");const V={class:"products"},q={key:0},z={class:"name"},F={class:"price"},G=s("加入购物车");i();const M=H(((t,s,r,o,i,p)=>{const d=c("van-button"),l=c("van-loading");return u(),e("div",V,[t.loading?(u(),e(l,{key:1})):(u(),e("div",q,[(u(!0),e(v,null,f(t.products,((s,r)=>(u(),e("div",{class:"product-list",key:r},[a("span",z,n(s.title),1),a("span",F,n(s.price)+"元",1),a(d,{type:"primary",size:"small",onClick:e=>t.addHandel(s)},{default:H((()=>[G])),_:2},1032,["onClick"])])))),128))]))])}));x.render=M,x.__scopeId="data-v-3e31cf1e";const U=[{path:"/",name:"product",component:x},{path:"/shoppingCart",name:"shoppingCart",component:()=>function(t,e){if(!e)return t();if(void 0===B){const t=document.createElement("link").relList;B=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(e.map((t=>{if(t in S)return;S[t]=!0;const e=t.endsWith(".css"),a=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${a}`))return;const s=document.createElement("link");return s.rel=e?"stylesheet":B,e||(s.as="script",s.crossOrigin=""),s.href=t,document.head.appendChild(s),e?new Promise(((t,e)=>{s.addEventListener("load",t),s.addEventListener("error",e)})):void 0}))).then((()=>t()))}((()=>import("./index.0578a1a9.js")),["/assets/index.0578a1a9.js","/assets/index.0164e0c5.css","/assets/vendor.9f0272e7.js"])}],W=C({history:_(),routes:U});const Y=y(w);Y.config.globalProperties.$toast=t=>h(t),Y.use(k).use(E).use(h).use(b),Y.use(R,P),Y.use(W),Y.mount("#app");export{j as t,T as u};
